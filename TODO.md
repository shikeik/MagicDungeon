ignored: indentFix codeFormatFix  
// todo写一些压栈待办, 定期从这里提取精炼到Tasks.md中来实际拾取与完成任务

## 下个版本主题 (v0.10.0)
> 待定 (建议: 房间多样性 / 数值重设计)

## 待办


- [x] 调试info: 为了直观看到屏幕栈, 我们在入口类render增加屏幕栈的info输出: a -> b -> c这样, 以便在出现异常屏幕跳转流程时定位问题
- [x] 恶性bug: 退格键不应该绑定返回按键行为, 导致删除文本时意外返回
- [x] 小体验优化: 新游戏dialog应该智能检查是否已有默认存档名, 已有则存档名后缀+1无限迭代直到不重名为止
- [x] 恶性负体验: 新游戏重名时展示的确认窗口布局十分混乱没用content.add导致内容错误布局以及自行造轮子yes/no布局, 按理应该使用默认yes/no+显示信息参数布局, 如果内置提供了那么使用内置, 如果没有, 我们搓一个继承BaseDialog的, 对了, 我们是不是有GlobalDialog或者DialogUI, 就像ToastUI.
- [x] 显示异常: 游戏转场画面中文字全是矩形, 检查文字是否没有使用项目中文文字

- [ ] 全量 UI 焦点化改造 (FocusManager)
    - [ ] 统一焦点导航逻辑 (FocusScope, FocusZone)
    - [ ] 修复 NewGameDialog 输入焦点问题
    - [ ] 适配所有 Modal Dialog 的焦点管理
- [ ] 资源加载流程重构
    - [ ] 统一资源加载管理器
    - [ ] 实现加载进度条场景 (LoadingScreen 改造)
    - [ ] 解决进入游戏时的卡顿问题
- [ ] 固定营地背景音乐
- [ ] 项目全量注释/提示汉化

门与钥匙: 锁宝物

更新文档

房间多样性: 
- 普通怪物房间: 
- 商店房间: 
- 奖励房间: 
- 锁定怪物(Boss)房间
- 跑酷房间: 纵向房间, 两侧封闭, 下端坍塌往上蔓延, 玩家需要躲避障碍尽快抵达上方终点以进入下层房间
...

场景多样性: 
- 水洼
- 地刺陷阱
- 射箭机关
...


增加多种玩家金币消耗方式

联机

战争迷雾: 玩家只有半径5方块视野, 只有踩过之后的路径会渲染, 包括怪物也只在踩过的视野范围渲染, 这样可以限制玩家视野, 同时引导玩家探索未探索区域

ui美化与交互修复完善

- [ ] (提取目标) 数值重设计: 包括: 
- 关卡怪物难度曲线
- 玩家成长曲线: 
  - 移动速度
  - 攻击力: ATK
  - 防御力: DEF
  - 生命值: HP
  - 经验曲线: 
- 场景物品获取曲线

- (exe发布流升级)

- [x] (已提取) 项目全量注释/提示汉化

- [x] (已提取) 项目全量ui的焦点光标化

- 羊皮卷进地图的设计有问题, 不能转screen, 应该只是重载地图到不同地牢或营地而已, 也不对, 要好好重新讨论下这个点

- [x] 设计模拟人类可视化测试流程: 之前已有此流程代码, 只需设计模拟输入api即可, 包括模拟gdx屏幕点击, 按键输入, 执行操作, 判断断言, 一条条断言, 直到全部通过或任意失败后结束.
  - [x] 做好后进行测试的测试, 模拟一段游戏操作, 包含ui点击, 进到游戏, 移动玩家, 打开界面, 输入作弊码, 背包界面拖拽装备穿戴, 取消等操作, 设立多个独立测试, 依次测试验证, 并全部通过
  - [x] 更新规则文件, 无法常规测试的情况使用此测试来验证

- [ ] (优先拾取) 拾取任务指令有: 拾取任务, 和, 拾取任务(自动), 自动模式禁止任何需用户确认的操作全程ai自行决定完成.此规则添加至规则文件.

- [x] (已提取) 现在营地似乎是随机音乐, 我需要固定音乐, 放一个属于林中空地的音乐

- [x] (已提取) 现在选择屏进游戏会明显卡一下, 重设计资源加载与获取流程, 设计一个系统来统一加载与管理资源, 然后统一在进入标题画面时加载所有资源, 我希望展示一个小人跑动动画下面是一个进度条, 小人x轴与进度同步, 从左到右, 加载完成后转场进入标题画面, 这里有一个逻辑职责问题, 我们希望先加载再进标题画面, 但是我们不能指定加载界面为锚点, 而是应该以标题画面为锚点, 但是进入场景时, 对, 进入场景时有个钩子方法, 我们调用进入标题画面方法, 然后内部检测资源未初始化, 此时卡住方法, 自动转加载条场景加载资源, 完成后再返回执行进入标题画面方法.


var file = .trae/documents/runtime-todos/2_测试态启动配置.md
以上, 分析需求并完善具体需求并自行思考来扩展任务量, 罗列然后更新修改[file]文件待办清单, 然后去做, 每做一步就回来勾选上做完的这条, 边做边勾选清单条目, 直到完成所有条目
范式流程写在[file]顶部来提醒你自己按规则办事
开始吧


现在总是启动演示选择屏场景, 我们的确需要在这个源头场景启动, 不过对于测试来说这样场景跳转比较繁琐, 所以可以有一个配置变量在启用时可以直接启动目标场景然后执行<模拟人类自动测试流程>来测试, 这样就很方便
var file = .trae/documents/runtime-todos/2_测试态启动配置.md
以上, 分析需求并完善具体需求并自行思考来扩展任务量, 罗列然后写到[file]文件中成为一个待办清单, 然后去做, 每做一步就回来勾选上做完的这条, 边做边勾选清单条目, 直到完成所有条目
以上, 把这个范式流程写在[file]顶部来提醒你自己按规则办事
开始吧

开始结束提交时间要多写明天信息因为这可能跨天, 我还想知道是每个项几点做的, 这个信息很重要很有实感, 然后就是总结分类功能可以, 但是这个分类下应该要按时间顺序罗列而不是无序, 有序才会有种真实进度感
以上, 修正优化规则文件, 再来一次<每日任务提取>

还缺一套代码优秀性审查与审查后规划优化方案并执行的流程
需要有一个明确的优秀代码参考和坏代码参考(可选?)

还缺完善的断言性测试流程, 包括用于无图形化的库相关的GdxTestRunner纯数据化测试, 以及用于需要实际运行应用的人类模拟化自动化测试.
  - 这里还需要探讨几个点: 
    - 如何界定什么时候分别用纯数据化测试或是启动应用的模拟操作自动化测试

开发流程思考: 
  - 首先要知道开发什么: 这就需要知道已有什么, 所以需要有一个游戏内容md文档目录组, 
    - 这个目录组是一个树形结构, 从入口页面自顶向下逐步展开游戏的所有内容详细.
    - 然后我们开发游戏的过程就是不停对这个目录组的内容增删改查.
  - 继知道做什么之后, 现在要知道先做什么再做什么, 所以接下来是开发的分类, 分类可以帮助确认任务优先级.
    - 开发的几个大类: 
      - 新增功能需求
      - 完善优化现有功能
      - 问题以及bug修复
  - 当罗列任务清单后, 就是真正开始完成任务

现在演示选择场景跳转流不是很喜欢, 希望改成树结构, 左树嵌套折叠式展示标题, 选中一个条目, 右边就自动展示当前条目目录下所有可跳转项(这里就是原基础选择结构), 只不过我们将硬编码的这个结构变成根据左边树选中项条目变成了动态生成的.

#### 大项功能



- [ ] 右上小地图超出屏幕外了, 预期右上对齐(上要考虑top-toolbar高度), 且留有一定右上margin, 不要忘了自身宽度长度

- [ ] 现在羊皮卷地图进迷雾深林会闪退

- [ ] 现在转场完才加载场景, 改为一个回调使场景加载完之前都只转场一半变黑 显示一个小人跑步动画, 加载完后再转出来, 以此解决转场完卡一下的问题

- [ ] 确认以下任务是否完成和完成情况: 
  - [x] (优先拾取) 设计模拟人类可视化测试流程: 之前已有此流程代码, 只需设计模拟输入api即可, 包括模拟gdx屏幕点击, 按键输入, 执行操作, 判断断言, 一条条断言, 直到全部通过或任意失败后结束.
    - [ ] 做好后进行测试的测试, 模拟一段游戏操作, 包含ui点击, 进到游戏, 移动玩家, 打开界面, 输入作弊码, 背包界面拖拽装备穿戴, 取消等操作, 设立多个独立测试, 依次测试验证, 并全部通过
    - [ ] 更新规则文件, 无法常规测试的情况使用此测试来验证
  - [ ] 进度/成就界面: 所有这种可解锁项可以设计一个进度系统的进度节点, 进度节点可以是无头散点, 也可以有其父子级表示链式解锁, 并且有一个界面来展示所有网状进度/成就节点, 该视图应均匀分布且布局程序化自动管理无需硬编码.
    - [ ] 进度数据结构与管理器 (ProgressNode, ProgressManager)
    - [ ] 自动布局算法实现 (Auto-layout)
    - [ ] 进度界面 UI 开发 (ProgressScreen)
    - [ ] 集成与测试
  - [ ] 实体有属性成长点设计: 成长点代表升一级所能获得的额外属性点, 包括生命, 攻击, 防御, 攻击速度成长
    - [ ] 每种属性有数值上限, 超过上限会限制为上限数值
    - [ ] 实体的等级所对应的属性与经验所需都应该是确定性的可直接计算函数, 方便直接切换任意等级, 而无需迭代式计算.
  - [ ] 开发一个抽屉式面板, 参考skewbar做style配置, 有上下左右四方向配置, 收起时仅显示一个朝向配置方向的三角按钮, 点击时抽屉式动画切换拉出/收起实际内容面板
  - [ ] 游戏屏屏幕中下方的HUD处的当前层数革新: 首先为中下HUD全部增加区域边线框, 分为大头区属性条区, 快捷栏区, 右边增加一个收起的朝上抽屉式面板, 拉开展示当前地牢信息面板(是一个比较小的面板)
  - [ ] 在地牢场景中时右上角显示向下方向收起的抽屉式面板, 拉出展示当前地牢小地图缩影(一个小矩形区域渲染小地图, 有一个可配置的可视区域大小大概能看到跟随玩家的1个房间略大缩影)
    - [ ] 点击小地图, 会打开大地图, 大地图可以纵览当前地牢地图全图景象缩影(包含所有已访问层(表现形式为纵向塔结构, 1在上, 每层往下间隔一定距离), 未去过的房间将不被渲染(有一个调试变量来解锁此限制以渲染所有房间)), 打开时有一个特殊叠影渐变效果(变换: 小地图的矩形位移并拉伸至全屏, 叠影: 小地图影像渐出, 大地图影像渐入, 最终大地图将铺满全屏, 中心3/5内容为大地图(可自由相机式操作), 右上显示地牢详细信息)

存档革新: 云端存档与向下兼容
我想先做存档向下兼容我觉得
以前没系统做过这个
包括云端存档同步(上传下载), 并且不同游戏版本存档(仅需要更新)互相独立，
最终玩家可以创建自己的账号，在云端保存存档，下载存档游玩，并且游戏版本变化后还能自动升级存档版本
持久化肯定是做了
我感觉得早做为好
不想逃避了
因为马上我就要做大世界，这绝对是存档大变更
也好验证存档兼容是否成功
总之玩家可以下载不同游戏版本游玩，从云端拉取自己账号存档数据
游戏版本更新后存档自动升级，旧版独立并保留
换回旧版时自动加载旧版存档



## 已搁置
