### 新, 逆序


- 确认assets/maps/地图区域读取逻辑, 是否符合预期设计


- (*****) 现在项目库模块连单元测试都没有, 
- 完全不知道功能是否信任可用, 
- 以及我们可能需要为了便于单元测试以及规范化代码设计, 
- 进行所有模块的数据化剥离, 
- 这套说辞不太合适, 要先找ai讨论下怎么说, 
- 总之最后需要获得: 
- 1 所有核心功能可以被独立测试, 
- 2 所有核心模块代码编写并通过全部的单元测试.

- (***)还有流程测试: 为了验证某一业务流程的一整个流程可用: 需要创建模拟自动化测试: 
- 包括: 1 模拟用户操作, 2 验证系统响应, 3 检查数据状态是否符合预期.



#### 原始
分析代码, 我需要知道:
- 内容上:
- - 为何每次进游戏营地地图都不一样,
- - 以及为何会出现两个camp的0层数据,
- 还有代码设计上:
- - 地图区域的存档数据访问点有哪些, 是否有混乱不统一处, 设计不合理处, 包括:
- - - 加载: 是否按设计, 在已有存档文件或内存数据时, 正确加载存档中地图区域数据, 或加载内存中地图区域数据
- - - 生成: 是否按设计, 在进入未访问过区域与未访问层时, 正确生成新地图区域数据与层数据
- 以及其他未发现的数据异常问题




#### ai整理
分析代码，我需要完成以下系统性分析任务：

**一、内容层面分析**
1. 深入研究为何每次进入游戏营地地图都会呈现不同的布局结构，需追踪地图生成算法的随机性来源、种子机制以及状态保存逻辑
2. 重点排查为何会出现两个camp的0层数据异常，需检查数据初始化流程、存档结构定义、内存对象生命周期管理，定位重复创建的根因

**二、代码设计架构审计**
1. 全面梳理地图区域存档数据的所有访问点，建立完整的访问路径图谱，识别：
	- 直接文件I/O访问点
	- 内存缓存访问点
	- 临时数据转换访问点

2. 系统检查数据访问的一致性问题：
	- 验证加载流程是否严格遵循设计规范：当存在存档文件时，必须正确反序列化存档中的地图区域数据；当存在有效内存数据时，应优先使用内存中的地图区域数据
	- 验证生成流程是否符合设计预期：在进入从未访问过的区域或层时，必须按照既定规则生成全新的地图区域数据结构，包括正确的层数据初始化

**三、深度异常检测**
1. 执行静态代码扫描，识别潜在的数据竞争条件、空指针风险、数组越界等隐患
2. 运行动态数据流分析，监控地图数据在运行时的完整生命周期，捕捉：
	- 未授权的数据修改
	- 悬垂指针引用
	- 数据版本不一致
	- 序列化/反序列化异常

**四、交付标准**
需提供包含以下内容的完整分析报告：
1. 问题根因的详细技术说明（附代码片段和调用栈）
2. 数据访问点的完整清单及风险评估等级
3. 设计缺陷的具体改进方案（包含重构建议和实施优先级）
4. 未发现问题的验证方法（含自动化测试用例设计）





































### 历史, 顺序
增加装备槽位设计: 主手, 副手, 铠甲, 鞋子, 头盔, 三个项链
背包左侧增加人物属性与装备槽布局, 以及avatar小人, 当穿戴有头盔, 铠甲, 鞋子, 主手(一般为武器), 副手(一般为盾牌)时会在小人身上渲染(注意剑需要镜像翻转且在左边渲染, 副手则在右边)

以上, 编写详细开发案, 向我确认, 确认前禁止变更代码


fix: 修复6

- 药水tooltip文本是回血和回魔, 而另一种叫自然回血和自然回魔, 查找并修复这些文本问题
- 进游戏时打开背包E标也要刷新现在没有
- 属性区域中间间隔大一点隔开, 并加个竖分割条
- 头盔渲染往上一点, 现在完全遮住头了
- 万能药tooltip要显示回血回魔
- 技能原空格治疗改为h以解决冲突

feat: 完善

- 增加一种自然回魔饰品
- 将所有还未加入生成表的新物品散落到地牢当中, 可以加一种宝箱, 玩家可以打开然后获取战利品(新设定, 箱子, 会打开一个格子界面与背包界面, 左侧是箱子内容, 右侧是背包内容(仅背包, 无装备区与属性区)
- 更新帮助内容: 包括按键和简单指南
- 移动端适配: 包括所有操作



fix: 完善2 修复

- 箱子应该是站上去按交互键打开, 并且背包区域的渲染直接使用背包原来的渲染方式(复用逻辑): 拖拽, 菜单什么的都一样, 然后箱子默认16格两排容量(但是战利品就几个没那么多)
- 帮助右边增加指南: 指南就是多了些逻辑的背包区域渲染(注意复用与多态逻辑): 罗列所有存在的物品, 玩家已获得过的物品亮起(原渲染), 可响应tooltip, 否则显示为暗色?物品且不响应tooltip
以上, 创建待办逐步完成, 没完成一步自检并修复然后继续


fix: 修复3

- 修复回城bug: 必须站在上层阶梯且周围3x3无怪物才可回城, 这个逻辑丢了, 不知道是没启用还是误删了
- 帮助指南的右侧要继承basedialog来写, 并且没有达到需求: 罗列所有存在的物品, 玩家已获得过的物品亮起(原渲染), 可响应tooltip, 否则显示为暗色?物品且不响应tooltip
箱子没有持久化, 重进就消失了, 而且应该处于下层阶梯房间而不是上层阶梯房间


1 贴边隐藏一半功能没了
2 悬浮窗位置y轴改到上方去了，改回来，改成上方1/4位置吧
3 最严重的，检查下哪里有问题，点击按钮唤不出虚拟键盘，悬浮窗消失，键盘也不出现



地牢素材















1 e键打不开背包, 看起来像是极快闪现打开又关闭了, 只能点背包ui打开了
2 wasd或方向键都不能移动焦点光标,
3 ui焦点移动也是wasd吧, 不过注意ui又焦点时禁用wasd对玩家操作输入
4 ecs现在还是直接popLastScreen, 需要做适配, 在有modal-ui焦点时取消pop事件而关闭焦点窗口

ScreenManager.java 96-101 这里有编译错误, 并且底层不应依赖上层, 重新思考做法


E打开背包后Ecs关闭, 然后我需要两次E键才能再次打开背包, 这是因为ecs关闭没有经过toggle, 这里需要统一逻辑





还有个小问题, 依旧是事件抢占问题, android的背包x点不到, 看起来像是被其他事件抢占控制权了, 并且还得想个解决方案: android没法唤出上下文菜单, 想下如何唤出




- 焦点颜色应为0, 0.6, 0.8, 0.4, 的蓝, 
- toolbar虽然不是modal但是我觉得只要有ui获得了焦点光标就不应该操作游戏吧(玩家不应该获得wasd输入)
- 帮助要可以用ecs关掉, 
- 手柄B(当前的ecs绑定?)也要能够popLastScreen
- 当切换装备时tooltip又掉位置了
- 当焦点光标开始作用时自动隐藏鼠标光标, 鼠标移动再自动浮现
- 还缺一些输入行为, 比如药水血/魔药快捷栏按键等

- seed那一排, 主要是种子输入框和R键也需要适配焦点光标, 这样可以挪过去直接输入种子, 挪走取消焦点光标以及焦点


0.8.x
ui皮肤主题革新, 通用, 以及地牢游戏用
- 加了全局自动测试器用于自动测试流程
- 增加皮肤主题测试场景展示uiskin
- bug
  - checkbox勾选框图标大小不统一的问题, 只做了一个状态的大小修正
  - 双网格场景clearAll滑动就清空而不是点击?
地牢素材革新: 换上美观的地牢素材, 以及应用双网格地图系统
- 地牢游戏地牢实装双网格, 地牢地面用旧地板纹理(注意是以前的地板纹理)铺一层, 然后上层用双网格放墙dungeon_brick
- 墙素材改64x
用SkinComposer完全革新skin而不是代码适配
实体素材革新: 换上spine实体, 有4向展示以及待机/简单攻击动画, 以及可换装




## 0.8: 
做什么, 没想好, 0.8要完成什么


### 0.8.9
修复ttip不统一问题

- 现在背包tooltip有三种不同位置以及重复的物品ttip面板, 键盘焦点选择触发的(格子旁), 鼠标悬浮时展示的ttip(鼠标位置), 切换装备时展示的ttip(中下固定位置), 详细分析现状, 做出解决方案, 向我报告, 然后复制进 documents 文件, 禁止私自改动代码

- 是要单一数据源, 但是不是固定面板, 面板还是鼠标光标悬浮和焦点光标选择都要显示ttip, 
1 首先, 先统一ttip, 保证同时只会出现1个
2 然后, 我们做个模式切换: 焦点光标触发后, 进入焦点光标模式, 我们隐藏鼠标光标. 然后, 鼠标移动时, 取消焦点光标选择, 进入鼠标光标模式
以上, 修正方案, 已确定需求, 思考代码更新思路, 并更新方案文件 `e:\WorkSpaces\Libgdx_WSpace\Projs\MagicDungeon\.trae\documents\28_背包Tooltip系统分析与重构方案.md` , 再次与我讨论确认

我发现tab键焦点光标操作没有效: 

材质导出每次都显示: TextureExporter增加存在检查并跳过



### 0.8.10
应用32x砖墙: 双网格场景, 地牢场景
增加6种地砖素材, 应用到游戏地牢地砖


### 0.8.11
绘制新砖墙

SkinComposer


### 0.8.12 实现真实手柄控制
- 增加了物理手柄监听器, 以及物理手柄监听log按键情况打印
- 增加了DPAD按键映射绑定 

- 按键绑定设置页面增加1列手柄类型绑定, 变为左边按键名, 中间键盘映射, 右边手柄映射

- 现在焦点光标似乎只对虚拟手柄生效(场景选择屏无法用真实手柄操作), 查看下相关代码并展示, 确认是需要增加真实手柄逻辑还是只需要修正虚拟手柄的按键码为真实手柄一致即可解决
- 修复光标被锁定bug: 现在只有在背包移动鼠标光标才会解除锁定, 应该是所有地方都可以移动鼠标来解除锁定
- 屏幕管理器的返回键监听需要支持按键行为来支持所有输入类型, 但是不要直接依赖上层而是做接口或者什么方式来提供自定义性
- 适配所有真实手柄映射并修复真实手柄getName不准确问题
  - 也许可以直接用gdxController的手柄键码?如果有

1 bug 刚进入GdxLauncher时默认键盘, 但是这时候我如果已经是手柄了, 逻辑上就卡住了, 导致我鼠标被锁, 且无法手柄操作, 解决一下
2 鼠标光标唤出tooltip位置不太对, 应该以鼠标光标为左上的起始位置出现, 先修复, 然后这个模式再增加一个实时更新ttip位置(以鼠标为面板左上起点)的功能, 这样ttip更跟手
3 ttip再加个功能: 再唤出ttip前, 如果格子物品类型为装备类型, 检查该类型装备槽装备, 如果有则左侧并列显示已穿戴装备的ttip作为对比, 这样玩家可以更方便地对比装备差异, 但是这里有个三饰品槽的判定问题饰品槽并不是一个类型一个坑, 想下咋弄
以上, 思考问题, 现状, 解决, 出一份更新案文件

1 梳理演示选择屏鼠标锁定的逻辑, 查看为什么初次进入演示选择屏时无法手柄操作, 只能键鼠, 而按键切换焦点光标时鼠标光标消失且锁定, 移动也无法解锁显示, 只有当点开始游戏之后才可以移动解锁, 然后返回演示选择屏, 此时手柄可以操作且可以正常切换焦点光标与鼠标光标模式了
以上, 依次梳理并向用户展示代码, 讲解逻辑链条, 并最后说明解决办法
- 因为事件初始化写在标题屏, 没写在入口屏...

1 进入时检测是否有手柄连接, 有则直接为手柄模式, 否则键盘模式
以上, 说思路, 方案, 代码涉及, 然后更新

1 鼠标光标唤出ttip位置还是不对, 现在看起来是以鼠标的再左上一两百位置为面板左上起点, 梳理逻辑链条, 讲解代码, 说明解决办法
- 这不是最佳实践, 实际上GScreen好像自带反投影方法你看看是否如我所说
- 这样还是很复杂, 实际上, 你可以保留GScreen引用, 然后直接使用即可, 也不需要回退逻辑, 代码最简

1 探讨如何解决手柄按键码平台差异性问题(以及设备差异性, 可能有?不同手柄品牌或类型会导致按键码不同?), 或者gdx有内置权威的手柄按键码, 或者android?只是pc/android有两套按键码还是说是其他情况, 我们需要先确定此点.
- 有一个疑惑, 我们按键映射配置存的是按键码啊, 这是否意味每次换手柄设备, 这个配置就会变甚至出问题
  - 存储逻辑按键码, 动态识别即可
- 我刚刚删除了旧的按键映射配置文件, 然后现在他不生成了?这是一个点, 另一个点: 我们要依次重新对每个按键行为绑定对应的默认手柄按键, 这里需要重新梳理, 还有一个点, android那个虚拟手柄与真实手柄同逻辑, 这里我不清楚它有没有按预期工作
以上, 分析需求, 现状, 展示代码片段, 梳理讲解逻辑链条

1 我按下手柄A, 但是没有响应, 并且我在按键配置按A被识别为Axis?

1 当我进入游戏且没有按键配置文件, 没有自动保存, 而是我去设置界面点击保存, 才出现文件

1 我发现rebindController方法逻辑设计似乎有问题, 在我重绑A时, 它通过控制器库映射与输入键码比对获得对应逻辑键码, 然后直接用逻辑键码来判定导致文字显示为Axis, 我只看了这里但是使用时我觉得应该也是这个原因导致A键无法正确解析为交互键.
以上, 梳理代码讲解并修复问题

√ 当我在按键配置界面按下A键, 它触发了开始菜单按钮直接进入了游戏, 这个问题怎么解决, 我不希望在配置映射时的按键触发任何实际行为

√ 现在的按键配置文件全是数字, 对人类理解不友好

√ 我发很多时候总是我习惯性escape, 只是想关闭当前窗口, 但是却直接返回了上一屏幕, 分析现状与出现所有出现这一情况的地方, 并思考解决方案, 修复此问题


1 当我拖动escape打开的窗口标题时, 有种滞涩感让我一直断触, 包括打开的设置的进度条的拖动等, 分析原因并尝试解决
√ 2 当我在设置勾选全屏, 此时切换到全屏, 然后我点击保存, 全屏又掉了
3 android 当我按下back键, 他现在没起任何作用: 预期应该触发esc逻辑
4 当我在esc唤出的窗口(是modal吗?)时, 按tab居然切换到了顶部toolbar的焦点光标, 理论上焦点光标应该局限于当前聚焦的布局中, 需要设计方式来实现这一构想

- 现在的githook commit-msg格式检查足够了吗还是有欠缺?我不确定
- 我想做两件事情: 1是需要向玩家展示一个看板, 在进入游戏时当前游戏版本如果与本地版本缓存不同, 则会提醒查看版本看板, 这里面有两部分内容, 1部分是游戏自上个版本到这个版本的更新内容介绍, 这是面向玩家的纯游戏内容的介绍, 不涉及代码. 第二部分是游戏百科: 这个百科汇集了游戏中所有的装备, 物品, 怪物, 技能等, 玩家可以在这里查看, 并了解游戏的所有详尽内容机制等.


- 背包右键没法唤出上下文菜单了怎么回事, 分析问题原因, 制定解决方案, 并通过某种方式(打log或者自动流程测试等)确定它真的修复了


- 清空changelog.md, 重新开始积累, 并且条目必须精要简短


- 转场效果: 我想要为游戏添加场景转换时的转场画面, 思考一种方式, 以及, 哪些地方需要它


- 项目全量注释/提示汉化: 针对".*"所有字符串和// /**/ ///等注释内容的汉化


- 帮我完善优化docs/ai/中的ai规则文档, 必须精简, 每一句都是必要的无可替代有意义的


- 我希望项目的所有ui按钮都可以支持焦点光标切换操作, 不知道怎么实现好一些, 但肯定不是挨个去手动写业务代码, 需要设计


### 蒙皮场景
有如下问题: 一一解决
- 问题: 
  - 1 align模式 用于创建位置配置 位置标注在模式3/4下渲染位置不对应, 怎么回事
  - 2 mesh模式 用于创建网格配置 应该先选一圈轮廓(蓝色,包括点与线)(并且可以凹轮廓, 现在是只能凸包了变成), 两个模式, 也是下拉菜单切换, 模式2创建与修改内部控制点(黄色包括点与线)(pick逻辑如果有则拾取并拖拽更新位置, 无则创建新点), 
  - 3 static_test模式 演示模式 此模式可以拖动点(包括轮廓与内部控制点)来查看网格变形效果
  - 4 dynamic_wave模式 演示模式2 此模式查看动态变形效果
  - 5 注意动态/经验演示模式数据互相独立, 切换是要刷新视图, 不要让动态模式效果影响到静态模式了(现在就是这样)
- 提炼: 
  - [ ] 1. Align 模式: 修复位置配置在其他模式下渲染不一致的问题。
  - [ ] 2. Mesh 模式: 细分为轮廓编辑(支持凹多边形)与内部控制点编辑两个子模式。
  - [ ] 3. Static Test 模式: 支持拖动所有点(轮廓+内部)查看静态网格变形。
  - [ ] 4. Dynamic Wave 模式: 优化动态变形效果演示。
  - [ ] 5. 系统: 实现模式切换时的数据重置与视图刷新，确保动态/静态模式数据独立。

现在披风的波动情况代码分析一下, 给我报告, 现在的效果是开始预期不一样, 预期是从顶部往下逐级权重增加, 并且披风摆动是横向摆动, 就像右边一阵风将它往左边吹的感觉

现在ai开发完全不管代码设计和优化, 重复逻辑一堆, 耦合严重, 得想个描述让它定期重构优化代码结构


1 有编译错误renderLayer有红线
2 我们现在的营地/地牢, 包括不同区域的地牢, 的数据结构设计是比较混乱的, 没有一个明确的结构设计, 重新好好设计下.编写设计案到中
3 assets中文件加载用AssetUtils了么不然会找不到, 以及关于多区域与编辑器编辑对象的设计: 我打算在assets/maps/下面放多个区域文件, 营地, 石之塔, 迷雾湿地, 灼热漠地, 深渊古堡, 还有更多更多, 不限制数量, 不过也不限制是否有此文件, 我的想法是: 存档形式不再是单文件, 而是变成saves/下game_saves/目录, 里面放多个存档目录比如my_save_1, 里面players/目录下来存放所有玩家的数据(为了之后联机), 然后地图变成areas/目录, 在创建存档时, 这里流程大改: 当标题画面按下新游戏将不再直接进入新游戏而是有一个创建界面, 要求输入存档名和玩家名, 以及继续游戏时也需要一个窗口来选择继续哪个存档, 在新游戏创建窗口点击完成后, 跳转加载界面(一个spine小人儿(用large_sworder吧)一直跑充当循环进度条), 直到创建世界方法完成, 回调执行转场游戏内画面, 在加载期间将assets/areas/所有地图区域文件复制到游戏根/saves/areas/下, 然后之后进区域(包括营地与不同地牢区域, (其实数据结构都一样, 只不过营地是只有一层的地牢(不需要特殊处理就还是列表结构然后只填一层数据就行, 保持逻辑一致性), 而地牢会有多层))时从存档加载areas目录, 如果检测到对应地图区域文件的对应层就直接加载, 如果没有文件就创建并读取, 没有那层就创建层, 然后保存逻辑不需要特别处理, 正常覆盖就没问题. 数据结构和新游戏/继续游戏的流程就说完了.
然后是编辑器的编辑对象, 这个也需要好好设计, 就是internal和local两个, 选择模式是开发模式那就是internal内部, 修改模式那就读取存档列表然后选择一个存档, 此时就是编辑files.local的游戏存档地图区域数据, 然后就是设定区域名(可以是游戏内置的区域名也可以自定义, 反正游戏读取就只是按名字读取, 不关心其他), 设定好后还要创建/选择区域等级层, 营地通常1层, 地牢的话就需要在编辑器自己+-层, 但是这里注意等级层可以不是连续的, 比如我只生成1,5,10层, 其他层依旧走默认生成逻辑, 这主要是做一些自定义的boss层, 功能层之类的地图编辑, 然后就没什么好说的了, 剩下就是现在编辑器有的: 实体/物品/方块摆放. 对了, 不需要扁平化操作了, 就固定两层吧, 地皮层1层, 方块层1层, 然后就是实体, 物品, 这样没那么大存储压力, 然后存储方式需要压缩下, 方块都是不变的数据所以存成字符串数组就可以了一个一层共两层, 只需要存固定方块/地皮id就完事.
以上, 终于说完了, 编写新设计案吧, 注意好好分析每一句话, 不要遗留任何一个需求与设计, 然后设计重构更新方案, 分大阶段, 以及所有需要验证不确定的点一一罗列-[ ]验证清单然后去验证, 最后按阶段逐步完成所有更新并通过测试.



1 玩家数据应该存储自身处于哪个地图区域, 哪一层, 加载玩家位置时应以此数据为源
2 存档根应该是StorageRoot/saves/修正下, 顺便统一下调用吧, 统一在一个地方生命所有目录跟, 包括存储根: StorageRoot, 存档根: 存储根+saves, 玩家数据根: 存档根+players, 这样将散落的拼接逻辑全部统一到一处符合逻辑统一原则.






1 新游戏dialog我按下ecs直接返回选择屏了, modal dialog按理来说会消耗esc键的, 这里修复下, 而且必须统一逻辑, 包括游戏屏标题画面以及其他任何地方的modal窗口都需要可以关闭当前焦点窗口同时阻拦屏幕管理器默认返回键
2 新游戏dialog输入栏没法输入东西, 焦点被焦点光标那几个键抢走了, 重设计这里, 已经成为技术债了: 一定要有一个统一的逻辑来管理焦点区域, 同一时刻仅存在一个焦点容器比如dialog, window这种, 然后是焦点区域, 同时也只能处于1个焦点区域(焦点区域参照背包的装备区与背包格子区), 焦点区域可以通过tab在一个焦点容器的多个区域间跳转, 并且上下左右焦点光标移动在焦点区域边界时也可以触发区域跳转.
3 我新游戏dialog确认后, 窗口关了但没有任何反应也没有进入游戏.


1 你改完后有编译错误
2 为啥标题屏要重写handleBackKey, 直接用不就行吗
3 你检查并给所有BaseDialog实现类都接入这个逻辑吧, 如果有没继承BaseDialog的全部也变成BaseDialog子类并适配逻辑, 保证项目全部使用处都统一使用这套返回处理逻辑(当然push/pop是写在BaseDialog封装的所以实际工作量并没那么大, 注意不要遗漏就好)


1 我自己修复了, 我直接删了, 然后ecs放到上层屏幕管理器自动回到上个屏幕,
2 现在没有peekScreen操作, 只能pushScreen即setCurScreen, 改下名吧, 对标stack, 改成push peek popScreen















- 加载游戏dialog存档列表应显示存档名, 现在显示的是内存地址
  大设计更新
- 需求理解错误: 地图区域应该是一个单一文件被存储于地图区域根目录下, 一个文件一整个区域, 而不是一个目录里面每个层一个文件
- 统一游戏资源(音频, 纹理)加载: 当我从选择屏点击开始游戏, 此时会卡几秒, 因为音频与纹理加载瞬间负荷超载了, 这里我们做了全局统一资源加载了吗, 还有, 这里也需要更新为先触发游戏转场屏(内容依旧是一样的主角小人奔跑, 但是文字显示为初始化游戏资源中, 此时同步进行异步加载), 等资源加载好后, 再转到标题屏幕, 以此解决明显的卡顿负体验问题
- 双预设转场: 羊皮卷进入退出需要渐变转场(这里我们要区分两种, 我们预设就两种, 一种游戏转场就是小人跑步+文字tip的当加载资源重建场景这种需要一定时间的转场就用这个, 一种就是普通的快速渐暗渐亮无等待转场), 羊皮卷选中区域则使用游戏转场, 文字为你说的去往区域中



1 为什么进入游戏时没有游戏转场, 即: 区域跳转时没有游戏转场(小人那个而不是渐变转场, 那是给无加载等待用的, 这两种必须写javadoc注释表明其用途)
2 选择屏触发应该是标题屏, 而不是预加载屏, 这样导致预加载屏被错误入栈了, 并且预加载屏真的实现了我说的等待资源加载完成后再切屏吗, 证明给我看
3 而且统一异步资源加载你做了吗, 给我证明, 为什么我觉得选择屏进入标题画面还是会卡一下
4 地牢存档没有真正分区域, 我发现你迷雾森林也是dungeon, 幸存者营地也是dungeon数据, 而且现在的数据格式太浪费空间, 直接改为floorIds一个String, blockIds一个String, 做编解码, 手动保存加载时触发, 用数字id, 空格做间隔, (要增加Air-0)
以上, 再看一次我的需求, 对比现在代码进度, 重新继续完成更新


1 感觉每次返回营地都是随机的营地地图呢??
2 现在点击标题画面, 那个预加载屏还是被记录了, 而且我返回之后再进, 又会加载一次然后导致直接闪退, 以及这个纹理加载不能用异步线程来加载吗??
3 现在继续游戏点不动了
4 现在存档数据会出现两个0层, 两个1层这种重复的, 怎么回事



