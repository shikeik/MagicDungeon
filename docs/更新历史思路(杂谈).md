
增加装备槽位设计: 主手, 副手, 铠甲, 鞋子, 头盔, 三个项链
背包左侧增加人物属性与装备槽布局, 以及avatar小人, 当穿戴有头盔, 铠甲, 鞋子, 主手(一般为武器), 副手(一般为盾牌)时会在小人身上渲染(注意剑需要镜像翻转且在左边渲染, 副手则在右边)

以上, 编写详细开发案, 向我确认, 确认前禁止变更代码


fix: 修复6

- 药水tooltip文本是回血和回魔, 而另一种叫自然回血和自然回魔, 查找并修复这些文本问题
- 进游戏时打开背包E标也要刷新现在没有
- 属性区域中间间隔大一点隔开, 并加个竖分割条
- 头盔渲染往上一点, 现在完全遮住头了
- 万能药tooltip要显示回血回魔
- 技能原空格治疗改为h以解决冲突

feat: 完善

- 增加一种自然回魔饰品
- 将所有还未加入生成表的新物品散落到地牢当中, 可以加一种宝箱, 玩家可以打开然后获取战利品(新设定, 箱子, 会打开一个格子界面与背包界面, 左侧是箱子内容, 右侧是背包内容(仅背包, 无装备区与属性区)
- 更新帮助内容: 包括按键和简单指南
- 移动端适配: 包括所有操作



fix: 完善2 修复

- 箱子应该是站上去按交互键打开, 并且背包区域的渲染直接使用背包原来的渲染方式(复用逻辑): 拖拽, 菜单什么的都一样, 然后箱子默认16格两排容量(但是战利品就几个没那么多)
- 帮助右边增加指南: 指南就是多了些逻辑的背包区域渲染(注意复用与多态逻辑): 罗列所有存在的物品, 玩家已获得过的物品亮起(原渲染), 可响应tooltip, 否则显示为暗色?物品且不响应tooltip
以上, 创建待办逐步完成, 没完成一步自检并修复然后继续


fix: 修复3

- 修复回城bug: 必须站在上层阶梯且周围3x3无怪物才可回城, 这个逻辑丢了, 不知道是没启用还是误删了
- 帮助指南的右侧要继承basedialog来写, 并且没有达到需求: 罗列所有存在的物品, 玩家已获得过的物品亮起(原渲染), 可响应tooltip, 否则显示为暗色?物品且不响应tooltip
箱子没有持久化, 重进就消失了, 而且应该处于下层阶梯房间而不是上层阶梯房间


1 贴边隐藏一半功能没了
2 悬浮窗位置y轴改到上方去了，改回来，改成上方1/4位置吧
3 最严重的，检查下哪里有问题，点击按钮唤不出虚拟键盘，悬浮窗消失，键盘也不出现



地牢素材















1 e键打不开背包, 看起来像是极快闪现打开又关闭了, 只能点背包ui打开了
2 wasd或方向键都不能移动焦点光标,
3 ui焦点移动也是wasd吧, 不过注意ui又焦点时禁用wasd对玩家操作输入
4 ecs现在还是直接popLastScreen, 需要做适配, 在有modal-ui焦点时取消pop事件而关闭焦点窗口

ScreenManager.java 96-101 这里有编译错误, 并且底层不应依赖上层, 重新思考做法


E打开背包后Ecs关闭, 然后我需要两次E键才能再次打开背包, 这是因为ecs关闭没有经过toggle, 这里需要统一逻辑





还有个小问题, 依旧是事件抢占问题, android的背包x点不到, 看起来像是被其他事件抢占控制权了, 并且还得想个解决方案: android没法唤出上下文菜单, 想下如何唤出




- 焦点颜色应为0, 0.6, 0.8, 0.4, 的蓝, 
- toolbar虽然不是modal但是我觉得只要有ui获得了焦点光标就不应该操作游戏吧(玩家不应该获得wasd输入)
- 帮助要可以用ecs关掉, 
- 手柄B(当前的ecs绑定?)也要能够popLastScreen
- 当切换装备时tooltip又掉位置了
- 当焦点光标开始作用时自动隐藏鼠标光标, 鼠标移动再自动浮现
- 还缺一些输入行为, 比如药水血/魔药快捷栏按键等

- seed那一排, 主要是种子输入框和R键也需要适配焦点光标, 这样可以挪过去直接输入种子, 挪走取消焦点光标以及焦点


0.8.x
ui皮肤主题革新, 通用, 以及地牢游戏用
- 加了全局自动测试器用于自动测试流程
- 增加皮肤主题测试场景展示uiskin
- bug
  - checkbox勾选框图标大小不统一的问题, 只做了一个状态的大小修正
  - 双网格场景clearAll滑动就清空而不是点击?
地牢素材革新: 换上美观的地牢素材, 以及应用双网格地图系统
- 地牢游戏地牢实装双网格, 地牢地面用旧地板纹理(注意是以前的地板纹理)铺一层, 然后上层用双网格放墙dungeon_brick
- 墙素材改64x
用SkinComposer完全革新skin而不是代码适配
实体素材革新: 换上spine实体, 有4向展示以及待机/简单攻击动画, 以及可换装




## 0.8: 
做什么, 没想好, 0.8要完成什么


### 0.8.9
修复ttip不统一问题

- 现在背包tooltip有三种不同位置以及重复的物品ttip面板, 键盘焦点选择触发的(格子旁), 鼠标悬浮时展示的ttip(鼠标位置), 切换装备时展示的ttip(中下固定位置), 详细分析现状, 做出解决方案, 向我报告, 然后复制进 documents 文件, 禁止私自改动代码

- 是要单一数据源, 但是不是固定面板, 面板还是鼠标光标悬浮和焦点光标选择都要显示ttip, 
1 首先, 先统一ttip, 保证同时只会出现1个
2 然后, 我们做个模式切换: 焦点光标触发后, 进入焦点光标模式, 我们隐藏鼠标光标. 然后, 鼠标移动时, 取消焦点光标选择, 进入鼠标光标模式
以上, 修正方案, 已确定需求, 思考代码更新思路, 并更新方案文件 `e:\WorkSpaces\Libgdx_WSpace\Projs\MagicDungeon\.trae\documents\28_背包Tooltip系统分析与重构方案.md` , 再次与我讨论确认

我发现tab键焦点光标操作没有效: 

材质导出每次都显示: TextureExporter增加存在检查并跳过



### 0.8.10
应用32x砖墙: 双网格场景, 地牢场景
增加6种地砖素材, 应用到游戏地牢地砖


### 0.8.11
绘制新砖墙

SkinComposer


### 0.8.12 实现真实手柄控制
- 增加了物理手柄监听器, 以及物理手柄监听log按键情况打印
- 增加了DPAD按键映射绑定 

- 按键绑定设置页面增加1列手柄类型绑定, 变为左边按键名, 中间键盘映射, 右边手柄映射

- 现在焦点光标似乎只对虚拟手柄生效(场景选择屏无法用真实手柄操作), 查看下相关代码并展示, 确认是需要增加真实手柄逻辑还是只需要修正虚拟手柄的按键码为真实手柄一致即可解决
- 修复光标被锁定bug: 现在只有在背包移动鼠标光标才会解除锁定, 应该是所有地方都可以移动鼠标来解除锁定
- 屏幕管理器的返回键监听需要支持按键行为来支持所有输入类型, 但是不要直接依赖上层而是做接口或者什么方式来提供自定义性
- 适配所有真实手柄映射并修复真实手柄getName不准确问题
  - 也许可以直接用gdxController的手柄键码?如果有

1 bug 刚进入GdxLauncher时默认键盘, 但是这时候我如果已经是手柄了, 逻辑上就卡住了, 导致我鼠标被锁, 且无法手柄操作, 解决一下
2 鼠标光标唤出tooltip位置不太对, 应该以鼠标光标为左上的起始位置出现, 先修复, 然后这个模式再增加一个实时更新ttip位置(以鼠标为面板左上起点)的功能, 这样ttip更跟手
3 ttip再加个功能: 再唤出ttip前, 如果格子物品类型为装备类型, 检查该类型装备槽装备, 如果有则左侧并列显示已穿戴装备的ttip作为对比, 这样玩家可以更方便地对比装备差异, 但是这里有个三饰品槽的判定问题饰品槽并不是一个类型一个坑, 想下咋弄
以上, 思考问题, 现状, 解决, 出一份更新案文件

1 梳理演示选择屏鼠标锁定的逻辑, 查看为什么初次进入演示选择屏时无法手柄操作, 只能键鼠, 而按键切换焦点光标时鼠标光标消失且锁定, 移动也无法解锁显示, 只有当点开始游戏之后才可以移动解锁, 然后返回演示选择屏, 此时手柄可以操作且可以正常切换焦点光标与鼠标光标模式了
以上, 依次梳理并向用户展示代码, 讲解逻辑链条, 并最后说明解决办法
- 因为事件初始化写在标题屏, 没写在入口屏...

1 进入时检测是否有手柄连接, 有则直接为手柄模式, 否则键盘模式
以上, 说思路, 方案, 代码涉及, 然后更新

1 鼠标光标唤出ttip位置还是不对, 现在看起来是以鼠标的再左上一两百位置为面板左上起点, 梳理逻辑链条, 讲解代码, 说明解决办法
- 这不是最佳实践, 实际上GScreen好像自带反投影方法你看看是否如我所说
- 这样还是很复杂, 实际上, 你可以保留GScreen引用, 然后直接使用即可, 也不需要回退逻辑, 代码最简

1 探讨如何解决手柄按键码平台差异性问题(以及设备差异性, 可能有?不同手柄品牌或类型会导致按键码不同?), 或者gdx有内置权威的手柄按键码, 或者android?只是pc/android有两套按键码还是说是其他情况, 我们需要先确定此点.
- 有一个疑惑, 我们按键映射配置存的是按键码啊, 这是否意味每次换手柄设备, 这个配置就会变甚至出问题
  - 存储逻辑按键码, 动态识别即可
- 我刚刚删除了旧的按键映射配置文件, 然后现在他不生成了?这是一个点, 另一个点: 我们要依次重新对每个按键行为绑定对应的默认手柄按键, 这里需要重新梳理, 还有一个点, android那个虚拟手柄与真实手柄同逻辑, 这里我不清楚它有没有按预期工作
以上, 分析需求, 现状, 展示代码片段, 梳理讲解逻辑链条

1 我按下手柄A, 但是没有响应, 并且我在按键配置按A被识别为Axis?

1 当我进入游戏且没有按键配置文件, 没有自动保存, 而是我去设置界面点击保存, 才出现文件

1 我发现rebindController方法逻辑设计似乎有问题, 在我重绑A时, 它通过控制器库映射与输入键码比对获得对应逻辑键码, 然后直接用逻辑键码来判定导致文字显示为Axis, 我只看了这里但是使用时我觉得应该也是这个原因导致A键无法正确解析为交互键.
以上, 梳理代码讲解并修复问题

√ 当我在按键配置界面按下A键, 它触发了开始菜单按钮直接进入了游戏, 这个问题怎么解决, 我不希望在配置映射时的按键触发任何实际行为

√ 现在的按键配置文件全是数字, 对人类理解不友好

√ 我发很多时候总是我习惯性escape, 只是想关闭当前窗口, 但是却直接返回了上一屏幕, 分析现状与出现所有出现这一情况的地方, 并思考解决方案, 修复此问题


1 当我拖动escape打开的窗口标题时, 有种滞涩感让我一直断触, 包括打开的设置的进度条的拖动等, 分析原因并尝试解决
2 当我在设置勾选全屏, 此时切换到全屏, 然后我点击保存, 全屏又掉了
3 android 当我按下back键, 他现在没起任何作用: 预期应该触发esc逻辑
4 当我在esc唤出的窗口(是modal吗?)时, 按tab居然切换到了顶部toolbar的焦点光标, 理论上焦点光标应该局限于当前聚焦的布局中, 需要设计方式来实现这一构想

- 现在的githook commit-msg格式检查足够了吗还是有欠缺?我不确定
- 我想做两件事情: 1是需要向玩家展示一个看板, 在进入游戏时当前游戏版本如果与本地版本缓存不同, 则会提醒查看版本看板, 这里面有两部分内容, 1部分是游戏自上个版本到这个版本的更新内容介绍, 这是面向玩家的纯游戏内容的介绍, 不涉及代码. 第二部分是游戏百科: 这个百科汇集了游戏中所有的装备, 物品, 怪物, 技能等, 玩家可以在这里查看, 并了解游戏的所有详尽内容机制等.














## 原则
- 我总是想到哪里做哪里, 更新十分的碎片化没有一个明确主题, 导致我版本号根本不知道什么时候更新主版本号, 次版本号, 修订号, 怎么办



