// 智能任务拾取配置:
// - 优先级策略: 智能优先级 (优先修复Bug > 核心功能 > 优化 > 杂项)
// - 目标拾取数(0则无上限): 10
// - 当前已完成(开始时置0): 1
// - 时间精确到分钟
// - 开始时间: 2026-02-16 12:40
// - 结束时间: 
// - 总耗时: 

## 大项
- [x] (待检查) 核心功能: 大世界 UI 化地牢选择器 (羊皮卷风格)
    - [x] (待检查) 创建 `WorldMapScreen`: 羊皮卷背景 (程序化/简单色块)，全屏 UI。
    - [x] (待检查) 实现地牢节点系统: 定义地牢数据 (位置、名称、等级、解锁状态)。
    - [x] (待检查) 实现交互绘制: 使用 `NeonBatch` 实现鼠标悬浮区域描边高亮 (发光效果)。
    - [x] (待检查) 程序化素材: 使用纯色/简单图形代替美术资源，区分不同地域/地牢。
    - [x] (待检查) 实现地牢入口逻辑: 点击节点打印日志或进入对应地牢场景。

- [x] (待检查) DLog.logT的tag筛选原本为白名单模式, 增加一个变量来控制切换白/黑名单, 且默认改为黑名单, 为了兼容白名单的Y不变, 黑名单只对X生效, 其他不处理, 这样新增tag时无需再增加showTags, 对了, 不需要把白名单黑名单都塞showTags, 可以独立两个列表这样方便管理.

- [x] (待检查) 羊皮地图入口应该替换在营地进入地牢时的界面而不是开始游戏处, 
  - [x] (待检查) 未解锁区域增加变暗且增加锁图标(自行生成)
  - [x] (待检查) 区域图标只有形状, 没有内部景色缩影, 自己绘制生成下简单美观即可
  - [x] (待检查) 以及需要一个调试配置变量(代码中)来临时解锁所有区域.
- [x] (待检查) 检查羊皮地图打开事件, 预期是替换原本选择层级界面处, 但实际现在没有任何地方能进入
- [ ] 解决羊皮地图点击进入区域结果闪退问题
- [ ] 进度/成就界面: 所有这种可解锁项可以设计一个进度系统的进度节点, 进度节点可以是无头散点, 也可以有其父子级表示链式解锁, 并且有一个界面来展示所有网状进度/成就节点, 该视图应均匀分布且布局程序化自动管理无需硬编码.

- [ ] 实体有属性成长点设计: 成长点代表升一级所能获得的额外属性点, 包括生命, 攻击, 防御, 攻击速度成长
  - [ ] 每种属性有数值上限, 超过上限会限制为上限数值
  - [ ] 实体的等级所对应的属性与经验所需都应该是确定性的可直接计算函数, 方便直接切换任意等级, 而无需迭代式计算.

- [x] (待检查) exe发布有问题, 预期结合jpackage与EnigmaVitualBox应该最终生成一个单exe文件无任何附文件

- [x] (待检查) 玩家死亡惩罚: 改为掉落3级等级, 以及随机掉落2-5个背包物品

- [ ] 开发一个抽屉式面板, 参考skewbar做style配置, 有上下左右四方向配置, 收起时仅显示一个朝向配置方向的三角按钮, 点击时抽屉式动画切换拉出/收起实际内容面板

- [ ] 游戏屏屏幕中下方的HUD处的当前层数革新: 首先为中下HUD全部增加区域边线框, 分为大头区属性条区, 快捷栏区, 右边增加一个收起的朝上抽屉式面板, 拉开展示当前地牢信息面板(是一个比较小的面板)

- [ ] 在地牢场景中时右上角显示向下方向收起的抽屉式面板, 拉出展示当前地牢小地图缩影(一个小矩形区域渲染小地图, 有一个可配置的可视区域大小大概能看到跟随玩家的1个房间略大缩影)
  - [ ] 点击小地图, 会打开大地图, 大地图可以纵览当前地牢地图全图景象缩影(包含所有已访问层(表现形式为纵向塔结构, 1在上, 每层往下间隔一定距离), 未去过的房间将不被渲染(有一个调试变量来解锁此限制以渲染所有房间)), 打开时有一个特殊叠影渐变效果(变换: 小地图的矩形位移并拉伸至全屏, 叠影: 小地图影像渐出, 大地图影像渐入, 最终大地图将铺满全屏, 中心3/5内容为大地图(可自由相机式操作), 右上显示地牢详细信息)


## 零碎
- [ ] 现在转场完才加载完场景, 改为一个回调场景加载完之前都只转场一半变黑显示一个小人跑步动画, 加载完后再转出来, 以此解决转场完卡一下的问题

## 大项

## 待检查 (ai可直接忽略不读)
- [x] (待检查) fix_fqcn.sh没有考虑到在注释中的情况(需要忽略跳过注释), 还有采用简单名后出现重名情况(这种情况的解决感觉很难, 不行就不处理也行(实在没办法的话), 结束后用户手动修正)
- [x] (待检查) exe发布流升级: 现有exe4j打包流需要.exe4j文件以及自动gradle任务配合更新, 并且打包出的exe还必须jdk/jre, 不符合需求, 新方案: 使用jpackage+EnigmaVirtualBox+自动化任务方案来获得全自动exe发布以及真正的无需额外jdk/jre可运行exe程序文件.
- [x] (待检查) 从TODO.md选取足够的压栈任务提炼到Tasks.md(记得标记TODO位置任务为已提取), 一并完成, 另外 此流程也加入开发流规则但触发条件是在Tasks.md拾取到提炼任务时触发
- [x] (待检查) 当我在蒙皮场景运行时最小化窗口再点开来回两次后就闪退了(表象原因, 根本原因很可能并不在此), 且我得到一个报错`IllegalStateException: Array is empty.`, 这是不应该的, 修复此问题
- [x] (待检查) 我发现我刷权重, 数据更新了, 但是右侧视图并没有及时更新, 我们当然可以手动来检测数据并适配及时刷新面板, 但最佳且符合代码设计的做法是用一种权威通知来让数据更新者刷新一个源信息, 然后源将通知到所有的信息监听者, 这种思路实际标准化名字叫什么, 有多少类似思路或者更准确说法"设计模式"?
- [x] (待检查) 保存的json全一排了, 使用美观打印, 保证人类可读性
- [x] (待检查) 控制线需要先画手柄后画以确保手柄不被遮挡

- [x] (待检查) 更新至规则文件: 我希望在任务拾取开始时记录时间, 并在任务完成时记录完成时间, 并写上此次任务实际完成任务数并对比当前时间与起始时间记录任务实际耗时

- [x] (待检查) 增加一个sh(参考根目录下系列sh, 纯sh代码实现): 用于批量处理项目中直接使用全限定名的情况, 匹配*.*.*...这样形式的使用, 将其替换为简单名并添加导入(如果没有, 包括直接导入与.*导入)
- [ ] fix_fqcn.sh没有考虑到在注释中的情况(需要忽略跳过注释), 还有采用简单名后出现重名情况(这种情况的解决感觉很难, 不行就不处理也行(实在没办法的话), 结束后用户手动修正), 如果实在要做我只能想到AST了, 然后用上强大AST的话感觉自动清理无使用import, 修正错误的不存在的import, 自动批量补全代码中欠缺的import(idea只有单条补全也许有插件?我不确定)
- [x] (待检查) 增加一处坑记录目录里面放所有坑.md文件, 用于记录在项目开发迭代过程中遇到的所有坑, 以备忘合提醒自己以及ai避免再次踩坑, 并且增加至规则文件: 在踩坑时mark并在完成后及时详细记录到坑记录目录文件中(或增加新文件, 或在已存在文件中追加(如是同类坑的情况))
  - [x] (待检查) 初始添加所有已发现的你记得的坑进去
  - [x] (待检查) 你又把左侧渲染区x1/4,y1/2中心对齐误理解了, 这是个坑啊, 现在这个点又不是披风中心了又变成错误的披风左下

- [x] (待检查) 当遇到致命异常等闪退报错时现在程序会退出, 但是gradle会持续运行, 这影响我开始下一次运行, 想办法在遇到这种情况时自动终止gradle运行(即终止控制台当前任务或真正终止程序, 总之能达到我的效果需求即可)
- [x] (待检查) 浓缩下开发流程, 现在又超1000字了, 尽量短且精要措辞具有高度核心表述性, 但不可为了压缩丢掉任何必要环节(但可进行职责划分, 分到其他规则文件中去)
- [x] (待检查) 更新至规则文件: X.Y.Z的次版本号即Minor发版现在没有明确定义何时发, 现在决定在进入新的Y次版本号时定义次版本主题更新内容, 中途可以更新其他细碎内容, 但是一旦主题更新内容完成, 则进行Minor发版, 此版本结束, 版本号推进到n.n+1.0, 并必须在此时确定好下个次版本主题更新内容, 然后提交为n.n.1, 结束, 次版本更新流程闭环

- [x] (待检查) 核心功能: 完成灵活滑动布局类开发与验证
    - [x] (待检查) 创建 `HoverFocusScrollPane` 类: 实现鼠标悬浮即获取焦点的逻辑
    - [x] (待检查) 创建 `ScrollLayoutTestScreen`: 验证悬浮切换焦点与滚轮直接滚动的功能
    - [x] (待检查) 适配旧布局: 将背包等界面的滚动容器替换为新类



## 已检查 (ai可直接忽略不读)
- [x] (已检查) 更新至规则文件并读到时立即应用规则: 在拾取任务时如果更改区已存在更改则首先完成上次的提交流程, 然后继续当前拾取/任务