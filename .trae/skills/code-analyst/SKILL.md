---
name: "code-analyst"
description: "全面的代码分析工具，用于深入理解代码逻辑、架构模式、依赖关系和潜在问题。当用户需要解释代码、分析复杂逻辑或进行代码审查时调用。"
---

# 代码分析师 (Code Analyst)

这是一个专业的代码分析技能，旨在帮助用户深入理解代码库、识别潜在问题并提供改进建议。

## 能力范围

1.  **代码解释**: 逐行或逐块解释复杂代码的逻辑和意图。
2.  **架构分析**: 识别项目中的设计模式、模块划分和数据流向。
3.  **质量审查**: 检查代码中的坏味道（Code Smells）、潜在 Bug 和性能瓶颈。
4.  **依赖分析**: 梳理模块间的依赖关系，识别循环依赖或过度耦合。
5.  **可视化支持**: 使用 Mermaid 语法生成类图、流程图或时序图，辅助理解。

## 使用指南

当用户提出以下类型的请求时，请调用此技能：

- "解释一下这段代码是怎么工作的"
- "分析一下这个文件的逻辑"
- "帮我看看这里的架构设计有什么问题"
- "检查一下这段代码有没有潜在的 bug"
- "画一个这个功能的流程图"

## 分析步骤

1.  **确定范围**: 明确需要分析的文件、类或函数。
2.  **阅读上下文**: 使用 `Read` 或 `SearchCodebase` 获取相关代码及其上下文。
3.  **逐步分析**:
    - **逻辑层**: 解释核心算法和控制流。
    - **数据层**: 分析数据结构和状态管理。
    - **架构层**: 评估设计模式和模块交互。
4.  **输出报告**:
    - 提供清晰的中文解释。
    - 指出关键发现（优点、缺点、风险）。
    - 如果适用，提供重构建议或 Mermaid 图表。

## 示例输出

### 代码解释
> `ProcessManager` 类主要负责... 其中 `handleRequest` 方法通过... 实现了...

### 潜在问题
> - **硬编码**: 第 45 行存在硬编码的配置路径。
> - **异常处理**: `try-catch` 块捕获了所有异常，可能掩盖具体错误。

### 架构建议
> 建议将 `DataParser` 提取为独立的服务，以解耦...
