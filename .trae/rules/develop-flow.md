---
alwaysApply: true
---
# AI 自动开发流程 (简明版)

> **核心循环**: 分析 -> 计划 -> 实现 -> 验证 -> 提交

## 0. 任务管理 (Task Management)
1. **智能拾取 (Trigger)**:
   - **触发条件**: 当收到用户指令 "拾取任务" 或类似意图时。
   - **读取配置**: 读取 `Tasks.md` 顶部的 `[目标拾取数]` (默认或用户指定)。
   - **智能筛选**: 拾取相应数量的任务 (优先级: Bug > Core > Opt > Misc)。
   - **允许重排版**: 可对 `Tasks.md` 进行重新排版以梳理逻辑，但**严禁**修改任务核心内容。
   - **任务拆解**: 若单项任务过于繁重，**必须**直接在 `Tasks.md` 中将其拆解为多个子任务，以此为准。

2. **完成循环 (Loop)**:
   - 每完成一个任务，将 `Tasks.md` 中该条标记为 `[x] (待检查)`。
   - 更新头部 `[当前已完成]` 计数 (+1)。
   - 检查是否达到 `[目标拾取数]` 或无剩余任务：
     - **是**: 重置 `[当前已完成]` 为 0，结束本次开发流程。
     - **否**: 继续拾取并执行下一个任务。

## 1. 开发五步曲
1. **明确需求 (Analyze)**: 分析影响范围，制定简明 TODO 计划。
2. **实现变更 (Implement)**: 小步修改，复用现有逻辑，**严禁**破坏现有代码风格。
3. **验证测试 (Verify)**: 
   - 桌面运行: `./gradlew lwjgl3:run` 确保无崩溃。
   - 全局构建: `./gradlew assemble` 确保编译通过。
4. **版本提交 (Commit)**: 
   - **及时提交**: 完成单个重要任务或一批相关杂项后，应立即提交，避免堆积。
   - 升级版本: 每次进行**非杂项** (Non-misc) 更新后，**必须**执行发版。
     - `./gradlew bumpPatch` (修复/小优化)。
     - `./gradlew bumpMinor` (新功能)。
   - 规范提交: 
     1. 编辑 `commit_msg.txt` (格式: `<type>: <summary>` + 空行 + `<details>`)。
     2. **必须**使用中文编写提交信息。
     3. 运行: `git commit -F commit_msg.txt`。
   - **禁止推送**: 只提交到本地，严禁自动 Push，推送由人工操作。

5. **清理交付 (Clean)**: 
   - 移除临时调试代码 (Logs)。
   - 更新相关文档 (如果功能变更)。
   - **更新 Tasks**: 严格遵循上述 [任务管理] 流程更新 `Tasks.md`。

## 2. 常用命令速查
- **运行桌面版**: `./gradlew lwjgl3:run`
- **运行安卓版**: (暂无)
- **全局构建**: `./gradlew assemble` (全平台编译检查)
- **清理构建**: `./gradlew clean`
