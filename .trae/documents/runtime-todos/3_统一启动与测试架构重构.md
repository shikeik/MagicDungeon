# 统一启动与测试架构重构任务清单

> **范式流程**:
> 1. 分析需求并罗列待办清单
> 2. 边做边勾选，直到完成所有条目
> (详见 `00_Task_Execution_Rules.md`)

## 1. 架构设计与配置重构
- [x] **定义启动模式枚举 `LaunchMode`**
    - [x] 创建 `com.goldsprite.magicdungeon.config.LaunchMode`
    - [x] 枚举值: `NORMAL` (正常启动), `DIRECT_SCENE` (直接进场景), `AUTO_TEST` (进场景并跑测试)
- [x] **重构 `DebugLaunchConfig`**
    - [x] 移动到 `com.goldsprite.magicdungeon.config` 包 (如果需要)
    - [x] 引入 `LaunchMode currentMode`
    - [x] 引入 `Class<? extends GScreen> targetScreen`
    - [x] 引入 `Class<? extends IGameAutoTest> autoTestClass` (需要先定义接口)
- [x] **定义统一测试接口 `IGameAutoTest`**
    - [x] 创建 `com.goldsprite.magicdungeon.testing.IGameAutoTest`
    - [x] 定义方法 `void run()` 或 `void setup()`

## 2. 测试用例适配
- [x] **重构 `NeonSkelEditorAutoTest`**
    - [x] 实现 `IGameAutoTest` 接口
    - [x] 确保逻辑无缝迁移
- [x] **重构 `HumanSimulatorTest`**
    - [x] 实现 `IGameAutoTest` 接口

## 3. 启动逻辑实现
- [x] **修改 `GdxLauncher`**
    - [x] 在 `initGameContent` 中读取 `DebugLaunchConfig.currentMode`
    - [x] **Case NORMAL**: 执行原有的 `ExampleSelectScreen` 逻辑
    - [x] **Case DIRECT_SCENE**: 直接 `setCurScreen(targetScreen)`
    - [x] **Case AUTO_TEST**: 
        - [x] `setCurScreen(targetScreen)`
        - [x] 反射实例化 `autoTestClass` 并调用 `run()`
- [x] **清理旧代码**
    - [x] 移除 `GdxLauncher` 中硬编码的 `if (targetScreen.simpleName.equals(...))` 判断

## 4. 验证与演示
- [x] **配置测试场景 1: 正常启动**
    - [x] 设置 Mode = NORMAL, 验证进入选单
- [x] **配置测试场景 2: 骨骼编辑器自动测试**
    - [x] 设置 Mode = AUTO_TEST, Target = NeonSkelEditorScreen, Test = NeonSkelEditorAutoTest
    - [x] 验证启动并自动跑测试
