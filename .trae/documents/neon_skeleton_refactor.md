# Neon 骨骼系统重构与优化需求

> 基于用户反馈的视觉 Bug 修复与功能增强需求分析。

## 1. 视觉修复 (Visual Fixes)

### 1.1 形象修正
- [ ] **头部与头发**
    - 现状：头发呈环状散布，无头部轮廓。
    - 目标：
        - 增加明确的头部轮廓（如圆形或椭圆）。
        - 头发呈扇形分布在头顶区域。
- [ ] **朝向统一**
    - 目标：人物默认面朝右侧。
- [ ] **关节限制**
    - 目标：手肘/膝盖弯曲方向符合人体工学（避免反关节）。
    - 具体：手肘向后弯曲（对于面朝右的角色，右臂顺时针，左臂逆时针？需根据 IK 逻辑调整）。

### 1.2 渲染风格升级
- [ ] **骨骼形状**
    - 现状：极细的实心线。
    - 目标：空心有厚度的形状（如空心矩形或梯形）。
    - 例外：头发保持实心或细线。

## 2. 功能增强 (Spine-like Features)

### 2.1 模式切换
- [ ] **实现模式状态机**
    - **Setup Mode (骨骼设置模式)**:
        - 显示绑定姿态 (Bind Pose)。
        - 允许调整骨骼长度、位置、层级结构（暂不支持拖拽修改结构，先支持查看）。
        - 禁用 IK 和动画播放。
    - **Animate Mode (动画播放模式)**:
        - 启用 IK Solver。
        - 启用动画时间轴播放。
        - 允许用户通过 IK 目标交互。

### 2.2 UI 支持
- [ ] 添加模式切换开关（Toggle/Radio Button）。
- [ ] 根据模式显示/隐藏相关控制面板。

## 3. 实现计划

1.  **重构渲染层 (`NeonHumanDemoScreen.drawBoneRecursive`)**
    - 使用 `NeonBatch` 绘制变换后的多边形来表示骨骼。
2.  **调整骨骼数据 (`createSkeleton`)**
    - 修正坐标和角度，使其面朝右。
    - 优化头发生成算法。
3.  **实现模式逻辑**
    - 引入 `currentMode` 变量。
    - 修改 `render` 循环，根据模式决定是否 update animation/IK。
